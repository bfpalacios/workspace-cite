<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition
	template="/plantilla/ModuloAdministrador/Plantillas/plantilla_admin.xhtml">
	<ui:define name="contenido">
	<h:form id="formPrincipal13">
		
		<!--  p:outputPanel id="pnlGridMensajes"
			style="width:500px;margin-top:5px;">
			<p:row>
				<p:column colspan="4" rowspan="2">
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" />
				</p:column>
			</p:row>
		</p:outputPanel -->

		<p:spacer width="5px" />
		<p:panel id="panelRegistroUsuario"
			header="Registro de Usuario RED - CITE"
			style="width: 100%;">
			<p:panelGrid id="pnlGridLoginAcceso">
				<p:row>
					<p:column colspan="6"
						sstyleClass="ui-column-label-spij styleAlignRightColumn">
						<h3>
							<h:outputText id="lblTitulo"
								value="#{mensaje['produccion.nuevo.cliente.datosgeneralesusuario']}" />
						</h3>
					</p:column>
				</p:row>
				<p:row>

					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblNombre" 
							value="#{mensaje['produccion.nuevo.cliente.nombre']}" />
						<h:outputText id="colorNombre"
							value="(*) "
							style="color:#ff0000" />
					</p:column>

					<p:column>
						<p:inputText id="nombre" size="25"  
							required="true"
							requiredMessage="campo requerido: Nombre"
						
							value="#{usuarioMBean.usuarioModel.nombres}" />
						
						<p:message for="nombre" />
					</p:column>

					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblTipoDoc"
							value="#{mensaje['produccion.nuevo.cliente.tipodoc']}" />
						
					</p:column>

					<p:column>
						<p:selectOneMenu id="tipoDoc"  
							value="#{usuarioMBean.usuarioModel.tipoDoc}"
							
							>
							
							<f:selectItem itemLabel="Seleccione Tipo Doc " />
							<f:selectItem itemLabel="DNI" itemValue="1" />
							<!-- f:selectItem itemLabel="Carne de Extranjeria" itemValue="2" / -->
						</p:selectOneMenu>

						<p:message for="tipoDoc" />
					</p:column>

					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblDni"
							value="#{mensaje['produccion.nuevo.cliente.nrodoc']}" />
					</p:column>

					<p:column> 
						
						<p:inputMask id="dni" value="#{usuarioMBean.usuarioModel.dni}" size="10"  maxlength="8" mask="99999999" 
						required="true"
						requiredMessage="campo requerido: DNI"
						  />
						<p:message for="dni" />
					</p:column> 
				</p:row>

				<p:row>
					
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblCargo"
							value="Cargo :" />
					</p:column>

					<p:column colspan="2">
						<p:inputText id="cargo" size="25"  
							required="true"
						requiredMessage="campo requerido: Cargo"
						
							value="#{usuarioMBean.usuarioModel.cargo}"  />
								<p:message for="cargo" />	
					</p:column>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblTelefonoUsuario"
							value="#{mensaje['produccion.nuevo.cliente.telefono']}" />
					</p:column>

					<p:column>
						<p:inputMask id="telefonoUsuario" size="10" maxlength="9"  
							value="#{usuarioMBean.usuarioModel.telefono}" mask="999-999-999"
							required="true"
						requiredMessage="campo requerido: Telefono Usuario"
						 />
								<p:message for="telefonoUsuario" />	
					</p:column>
					
					<p:column>
						<p:inputMask id="telefonoUsuario2" size="10" maxlength="9"  
							value="#{usuarioMBean.usuarioModel.telefono2}" mask="999-999-999" />
								<p:message for="telefonoUsuario2" />	
					</p:column>

				</p:row>

				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lFecha"
							value="Fecha de Nacimiento" />
					</p:column>
					<p:column>
						<p:calendar value="#{usuarioMBean.usuarioModel.fechaNac}" id="fechaCite"
							pattern="dd/MM/yyyy" mode="popup" showOn="button"
							required="true"
							requiredMessage="campo requerido: Fecha de Nacimiento"
						
							>
							
						</p:calendar>
						<p:message for="fechaCite" />	
					</p:column>
				</p:row>
				
				<p:row>
				<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
					<h:outputText id="lblDpto"
						value="Departamento donde nacio" />
				</p:column>
				<p:column>
					<p:selectOneMenu id="dpto"
						value="#{usuarioMBean.usuarioModelSelect.codDepartamento}"
						required="true"
							requiredMessage="campo requerido: Elegir Departamento donde nacio"
						valueChangeListener="#{usuarioMBean.actualizarlistProvincia}"
						styleClass="ui-column-label-spij styleAlignRightColumn">
						<f:selectItem itemLabel="Seleccione el departamento:" />
						<f:selectItems value="#{usuarioMBean.usuarioModel.listUbigeo}"
							var="dpto" itemLabel="#{dpto.departamento}"
							itemValue="#{dpto.idUbigeo}" />
						<f:ajax event="change" execute="@this" render="provincia" />
					</p:selectOneMenu>
						<p:message for="dpto" />	
				</p:column>

				<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
					<h:outputText id="lblProvincia"
						value="#{mensaje['produccion.nuevo.cliente.provincia']}" />
				</p:column>

				<p:column>
					<p:selectOneMenu id="provincia"
						value="#{usuarioMBean.usuarioModelSelect.codProvincia}"
						required="true"
							requiredMessage="campo requerido: Elegir Provincia donde nacio"
						valueChangeListener="#{usuarioMBean.actualizarlistDistrito}"
						styleClass="ui-column-label-spij styleAlignRightColumn">
						<f:selectItem itemLabel="Seleccione la provincia " />
						<f:selectItems value="#{usuarioMBean.usuarioModel.listProvincia}"
							var="prov" itemLabel="#{prov.provincia}"
							itemValue="#{prov.idUbigeo}" />

						<f:ajax event="change" execute="@this" render="distrito" />
					</p:selectOneMenu>
					<p:message for="provincia" />	
				</p:column>


				<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
					<h:outputText id="lblDistrito"
						value="#{mensaje['produccion.nuevo.cliente.distrito']}" />
				</p:column>

				<p:column>
					<p:selectOneMenu id="distrito"
						value="#{usuarioMBean.usuarioModelSelect.codDistrito}"
						required="true"
							requiredMessage="campo requerido: Elegir Distrito donde nacio"
						
						styleClass="ui-column-label-spij styleAlignRightColumn">
						<f:selectItem itemLabel="Seleccione el distrito " />
						<f:selectItems value="#{usuarioMBean.usuarioModel.listDistrito}"
							var="distrito" itemLabel="#{distrito.distrito}"
							itemValue="#{distrito.idUbigeo}" />
					</p:selectOneMenu>
					<p:message for="distrito" />	
				</p:column>

			</p:row>  
				
				<p:row>

					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblCITE"
							value="CITE: " />
					</p:column>
					<p:column>
						<p:selectOneMenu id="cite"  
							value="#{usuarioMBean.usuarioModelSelect.codCite}"
							required="true"
							requiredMessage="campo requerido: Elegir Cite"
						
						
							valueChangeListener="#{usuarioMBean.actualizarlistSedes}"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<f:selectItem itemLabel="Seleccione la cite:" />
							<f:selectItems value="#{usuarioMBean.usuarioModel.listCite}"
								var="cite" itemLabel="#{cite.descripcion}"
								itemValue="#{cite.codigoCite}" />
							<f:ajax event="change" execute="@this" render="sede" />
						</p:selectOneMenu>
							<p:message for="cite" />
					</p:column>

					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblSede"
							value="Sede :" />
					</p:column>

					<p:column>
						<p:selectOneMenu id="sede"  
							value="#{usuarioMBean.usuarioModelSelect.codSede}"
							valueChangeListener="#{usuarioMBean.actualizarlistDependencias}"
							required="true"
							requiredMessage="campo requerido: Elegir Sede"
						
						
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<f:selectItem itemLabel="Seleccione la sede " />
							<f:selectItems value="#{usuarioMBean.usuarioModel.listSedes}"
								var="sedes" itemLabel="#{sedes.descripcion}"
								itemValue="#{sedes.codigo}" />

							<f:ajax event="change" execute="@this" render="dependencia" />
						</p:selectOneMenu>
						<p:message for="sede" />
					</p:column>


					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblDependencia"
							value="Dependencia :" />
					</p:column>

					<p:column>
						<p:selectOneMenu id="dependencia"  
							value="#{usuarioMBean.usuarioModelSelect.codDependencia}"
							
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<f:selectItem itemLabel="Seleccione la dependencia " />
							<f:selectItems value="#{usuarioMBean.usuarioModel.listDependencia}"
								var="dependencia" itemLabel="#{dependencia.descripcion}"
								itemValue="#{dependencia.codigo}" />
						</p:selectOneMenu>
						<p:message for="dependencia" />
					</p:column>

				</p:row> 
				<p:separator />
				<p:spacer width="5px" />

				<p:row>
					<p:column colspan="6"
						styleClass="ui-column-label-spij styleAlignRightColumn">
						<h3>
							<h:outputText id="lblDatosUsuario"
								value="#{mensaje['produccion.nuevo.cliente.datosusuario']}" />
						</h3>
					</p:column>
				</p:row>
				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblCodUsuario"
							value="#{mensaje['produccion.nuevo.cliente.nombreusuario']}" />
					</p:column>

					<p:column>
						<p:inputText id="idUsuario" size="10"  
							required="true"
							requiredMessage="campo requerido: Ingrese codigo de usuario"
						
						
							value="#{usuarioMBean.usuarioModel.idUsuario}" />
							<p:message for="idUsuario" />
							
					</p:column>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblEmaiiadmin"
							value="Email ITP : " />
					</p:column>

					<p:column colspan="3">
						<h:inputText id="emailAdmin" size="20"
							value="#{usuarioMBean.usuarioModel.emailAdmin}" required="true" 
						validatorMessage="El email No es valido"
						requiredMessage="campo requerido: Email de la Sede">
    						<f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
    					</h:inputText>
    					<p:message for="emailAdmin" />
    					
					</p:column>
				</p:row>
				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblLoginPassword"
							value="#{mensaje['demo.mantenimiento.usuario.clave']}" />
					</p:column>

					<p:column styleClass="styleAlignLeftColumn">
						<p:password id="clave" size="25"    
							required="true"
							requiredMessage="campo requerido: Ingrese su password"
							value="#{usuarioMBean.usuarioModel.clave}" />
						<p:message for="clave" />
					</p:column> 
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblEmaiiadmin2"
							value="Email Personal:" />
						
					</p:column>

					<p:column colspan="3">
						<h:inputText id="emailPersonal" size="20"
							value="#{usuarioMBean.usuarioModel.email1}" required="true" 
						validatorMessage="El email No es valido"
						requiredMessage="campo requerido: Email de la Sede">
    						<f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
    					</h:inputText>
						<p:message for="emailPersonal" />
					</p:column>

				</p:row>
				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblLoginConfirmarPassword"
							value="#{mensaje['demo.mantenimiento.usuario.confirmaclave']}" />
					</p:column>

					<p:column styleClass="styleAlignLeftColumn">
						<p:password id="confirmarclave" size="25"  
							required="true"
							requiredMessage="campo requerido: Ingrese la confirmacion de su password "
							value="#{usuarioMBean.usuarioModel.confirmarClave}"  />
						<p:message for="confirmarclave" />
					</p:column>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblPerfil"
							value="#{mensaje['produccion.nuevo.cliente.perfil']}" />
					</p:column>

					<p:column colspan="4" styleClass="styleAlignLeftColumn">
						<p:selectOneMenu id="rol"  
							required="true"
							requiredMessage="campo requerido: Elegir Rol"
							value="#{usuarioMBean.usuarioModelSelect.rol}">
							<f:selectItem itemLabel="Seleccione el Perfil" />
							<f:selectItem itemLabel="Rol Usuario CITE " itemValue="1" />
							<f:selectItem itemLabel="Rol Admin " itemValue="2" />
						</p:selectOneMenu>
						<p:message for="rol" />
					</p:column>


				</p:row>
				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblJefe"
							value="Jefe Inmediato :" />
					</p:column>

					<p:column styleClass="styleAlignLeftColumn">
						<p:inputText id="jefe" size="25"    
							value="#{usuarioMBean.usuarioModel.jefe}" />
						<p:message for="jefe" />
					</p:column> 
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lblTelefonoJefe"
							value="Telefono de contacto :" />
					</p:column>

					<p:column colspan="3">
						<p:inputMask id="telefonoJefe" size="10" maxlength="9"  
							value="#{usuarioMBean.usuarioModel.telefonoJefe}" mask="999-999-999" />
								<p:message for="telefonoJefe" />	
						 
					</p:column>

				</p:row>
				

			</p:panelGrid>
		</p:panel>

		<p:outputPanel id="pnlGuardar" style="width:400x;margin-top:10px;">
			<p:row>
				<p:column colspan="2" styleClass="styleAlignRightColumn">
					<p:commandButton id="botonGuardar" value="Registrar Usuario"
						styleClass="buttonMarginNormal"
						actionListener="#{usuarioMBean.guardarNuevoUsuario}"
						update="pnlGridLoginAcceso,nombre, tipoDoc, dni, dpto, provincia, distrito, telefonoJefe, jefe, cargo, cite, sede, dependencia, fechaCite, idUsuario, emailPersonal , emailAdmin, clave,confirmarclave, telefonoUsuario2, telefonoUsuario, rol"
						ajax="true" />
				</p:column>


				<p:column colspan="2" styleClass="styleAlignRightColumn">
					<p:commandButton value="Cancelar" id="botonCamcelar" immediate="true"
						action="#{usuarioMBean.cancelarRegistrarNuevoUsuario}"
						ajax="false" />
				</p:column>
			</p:row>
		</p:outputPanel>
		
		<p:dialog header="Informe del Sistema" modal="true" height="120"
			width="380" appendTo="@(body)" style="z-index: 999 !important"
			id="dialogNuevoUsuarioCite" widgetVar="dialogNuevoUsuarioCite">

			<h4 style="font-size: 16px">¡El usuario se creo correctamente!</h4>
			
			<input type="button" value="Aceptar"
					onclick="window.location='#{facesContext.externalContext.requestContextPath}/paginas/ModuloAdministrador/admin/nuevoUsuario/nuevoUsuarioCite.xhtml';" />
						
		</p:dialog>
	</h:form>
	</ui:define>
</ui:composition>
</html>