<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition
	template="/plantilla/ModuloAdministrador/Plantillas/plantilla_admin.xhtml">
	<ui:define name="contenido">

		<p:outputPanel id="mensajeNuevoServicioInformativo"
			style="width:400px;margin-top:5px;">
			<p:messages id="messages" showDetail="true" autoUpdate="true"
				closable="true" />

		</p:outputPanel>
		
		<p:panel header="#{mensaje['produccion.buscar.noticia.label.titulo']}" style="width: 400px;">
			<p:panelGrid id="pnlGridBuscarNoticias">

				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lNombre"
							value="#{mensaje['produccion.buscar.noticia.label.buscarportitulo']}" />
					</p:column>
					<p:column>
						<p:inputText id="tituloNoticia"
							value="#{noticiaMBean.titulo}" size="20" />
					</p:column>
				</p:row>

				<p:row>
					<p:column styleClass="ui-column-label-spij styleAlignRightColumn">
						<h:outputText id="lCodigo"
							value="#{mensaje['produccion.buscar.noticia.label.buscarporfecha']}" />
					</p:column>
					<p:column>
						<p:calendar value="#{noticiaMBean.fecha}" id="fechaNoticia"
						pattern="dd/MM/yyyy" mode="popup" showOn="button">
						</p:calendar>					
					</p:column>
				</p:row>


				<p:row id="filaBuscar">
					<p:column colspan="2"
						styleClass="ui-column-label-spij styleAlignCenterColumn">
						<p:commandButton value="Buscar" id="botonBuscar" actionListener="#{noticiaMBean.buscarNoticias}" ajax="true"
							update="tablaNoticias" />
					</p:column>
				</p:row>
			</p:panelGrid>
		</p:panel>
		<p:spacer width="10px" />
		
		<p:panelGrid id="pnlGridResultadoBuscarNoticia">
		
			<p:row>
				<p:column colspan="2" style="font-weight:bold;font-size:15px">#{mensaje['produccion.buscar.servicio.label.noticiasencontradas']}</p:column>
			</p:row>

			<p:row id="filaTabla">
				<p:column id="colTabla"
					styleClass="ui-column-label-spij styleAlignRightColumn" colspan="3">

					<p:dataTable id="tablaNoticias" widgetVar="noticiaTabla"
						value="#{noticiaMBean.datosInformativoModelGrid}"
						selectionMode="single"
						selection="#{noticiaMBean.informativoModel}"
						rowKey="#{registro.id}" var="registro" binding="#{tabla}"
						emptyMessage="No se encuentra informacion" paginator="true" rows="10">

						<p:column headerText="Codigo(*)"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<h:outputText value="#{registro.id}" />
						</p:column>

						<p:column headerText="Título"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<h:outputText value="#{registro.titulo}" />
						</p:column>

						<p:column headerText="Descripción corta"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<h:outputText value="#{registro.descripcionCorta}" />
						</p:column>

						<p:column headerText="Fecha"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<h:outputText value="#{registro.fecha}" />
						</p:column>
						
						<p:column headerText="Edición"
							styleClass="ui-column-label-spij styleAlignRightColumn">
							<p:commandButton value="Editar" type="submit" update=":formPrincipal:edicionDetalle" action="#{noticiaMBean.setInformativoModel(registro)}" process="tablaNoticias" onclick="PF('edicionDialog').show();" />
							<p:commandButton value="Eliminar" type="submit" update=":formPrincipal:eliminarDetalle" actionListener="#{noticiaMBean.action(registro)}" process="@this" onclick ="PF('eliminarDialog').show();"/> 
						</p:column>
						
					</p:dataTable>

				</p:column>
			</p:row>
		</p:panelGrid>
		
<p:dialog widgetVar="edicionDialog" header="Editar noticia" showEffect="clip" hideEffect="clip">
        <h:panelGrid id="edicionDetalle" columns="2">
            <p:outputLabel for="titulo" value="Título:" />
            <p:inputText id="titulo" value="Titulo" required="true"/>
            
            <p:outputLabel for="dscorta" value="Descripcion corta:" />
            <p:inputTextarea id="dscorta" value="Descripcion corta"  required="true"/>
            
            <p:outputLabel for="desc" value="Descripción:" />
            <p:inputTextarea id="desc" value="Descripción"/>
 
            <p:outputLabel for="fecha" value="Fecha:" />
            <p:inputText id="fecha" value="20 06 2016 12:10"/>
 
            <p:outputLabel for="imagen" value="Archivo:" />
            <p:inputText id="imagen" value="Imagen"/> 
 	  
            <p:commandButton type="reset" value="Limpiar" />
            <p:commandButton id="addButton" value="Guardar" actionListener="#{noticiaMBean.buscarNoticias}" oncomplete="PF('noticiaTabla').update();PF('edicionDialog').hide();" />
        </h:panelGrid>
    </p:dialog>
    
    <p:dialog widgetVar="eliminarDialog" header="Eliminar noticia" showEffect="clip" hideEffect="clip">
        <h:panelGrid id="eliminarDetalle" columns="2">
            <p:outputLabel value="Esta segura que eliminra esta noticia" />            
            <p:commandButton id="deleteButton" value="Si" actionListener="#{noticiaMBean.buscarNoticias}" oncomplete="PF('noticiaTabla').update();PF('eliminarDialog').hide();" />
            <p:commandButton type="reset" value="No" oncomplete="PF('noticiaTabla').update();PF('eliminarDialog').hide();" />
        </h:panelGrid>
    </p:dialog>

	</ui:define>	 
</ui:composition>
</html>